## 🛣️ Tech.Mobility ROADMAP.md

תיעוד של הפיצ'רים המיועדים לפיתוח, כולל תוספות קריטיות ואופטימיזציות עתידיות שיגדירו את השלבים הבאים של האפליקציה.

---

## ✅ שלב 1 — MVP קיים

* [x] הרשמה דו-שלבית ללקוחות ונהגים
* [x] העלאת קבצים (רישיון נהיגה, תמונת רכב)
* [x] אימותים לוגיים וולידציה לנתונים
* [x] הזמנת נסיעה מצד לקוח
* [x] קבלה/דחייה של נסיעה מצד נהג
* [x] סנכרון בזמן אמת (Socket.IO): סטטוס, מיקום, צ'אט
* [x] מעקב אחרי מיקום נהג (Leaflet + Geolocation)
* [x] ממשק צ'אט מאובטח בין נהג ללקוח בזמן נסיעה
* [x] הצגת סטטיסטיקות בסיסיות לנהג
* [x] היסטוריית נסיעות ללקוח

---

## 🧱 שלב 2 — שיפורים חיוניים

* [ ] עריכת פרופיל (טלפון, שם, סיסמה, פרטי רכב/תשלום)
* [ ] תמיכה בלקוחות שהם גם נהגים (role כפול או מעבר בין תפקידים)
* [ ] מסך "סיום נסיעה" מצד נהג
* [ ] ניהול נסיעה בפועל: התראה שהנהג הגיע, "אני מחכה בחוץ" וכו'
* [ ] חיזוק האבטחה — JWT refresh tokens + rate limit בצ'אט
* [ ] שילוב Push Notifications (דרך OneSignal או Expo)

---

## 🚕 שלב 3 — רמות מתקדמות

### 🔁 טרמפיסטים (Shared Rides)

* [ ] ספירת מקומות ישיבה פנויים ע"פ נתוני רכב הנהג
* [ ] בקשת הצטרפות לנוסע קיים (הטרמפיסט שולח בקשה)
* [ ] אישור משני הצדדים (נהג + נוסע קיים)
* [ ] חישוב מסלול משולב בצורה אופטימלית
* [ ] הענקת הנחה לטרמפיסט (אחוז מדורג)

### 📍 אלגוריתם הקצאת נהג

* [ ] קבלת קואורדינטות מהלקוח בזמן ההזמנה
* [ ] שאילתת חיפוש על נהגים זמינים לפי מרחק גיאוגרפי (GeoJSON)
* [ ] בחירת נהג הקרוב ביותר עם זמינות > 0
* [ ] שקלול ETA (Estimated Time of Arrival) של כל נהג פוטנציאלי
* [ ] התחשבות במקומות ישיבה טרם בחירה: רק נהגים שיכולים להכיל את כלל הנוסעים (כולל טרמפיסטים)
* [ ] חישוב מסלול משולב עם חסכון בזמן או מרחק כולל
* [ ] שליחת בקשה רק לנהגים שמתאימים מכל הבחינות

### 🧭 ניווט מקצועי

* [ ] תמיכה בפתיחה של Google Maps / Waze עם ניווט ישיר
* [ ] אופציה למעבר ניווט מתוך הדשבורד של הנהג

---

## 💳 שלב 4 — תשלום ודוחות

* [ ] שילוב מערכת תשלומים (Stripe / PayBox / Bit)
* [ ] שליחת חשבונית במייל
* [ ] חישוב רווחים ועמלות
* [ ] ממשק אדמין עם מעקב והיסטוריית כל הנסיעות

---

## 📈 פיצ'רים עתידיים

* אפליקציית מובייל מלאה (React Native)
* מנגנון דירוג נהגים ולקוחות
* בינה מלאכותית לזיהוי בקשות מוזרות, סיכוני אבטחה
* Dashboard של ארגונים (לשליטה על הזמנות מרובות)
* תמיכה במספר ערים / מוקדים במקביל

---

מסמך זה מתעדכן לפי ההתקדמות בפיתוח ובדיקות מערכת.


## 🗓️ עדכון התקדמות – 6 במאי 2025
✅ מה הושלם היום:
* בוצעה הפרדה של הלוגיקה בדשבורד לקוח:
* יצירת hook מותאם (useCustomerSocket) לניהול חיבורי Socket. IO.
* שילוב רכיב צ'אט עצמאי ChatBox בתוך הדשבורד.
* מעבר לשימוש בפונקציות API מופרדות (rideApi) במקום קריאות ישירות.
* שיפור משמעותי בניקיון הקוד והכנה להרחבה עתידית.

## 🛠️ המשימות הבאות:
* לבצע מודולריזציה דומה גם לדשבורד נהג.
* להוציא את לוגיקת בחירת מיקום מהרכיב הראשי.
* להוסיף סינון נסיעות לפי סטטוס.
* להתחיל לכתוב בדיקות עבור hook ורכיבי UI.